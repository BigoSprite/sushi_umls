<mxfile host="Electron" modified="2024-03-30T05:10:18.496Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.1.0 Chrome/120.0.6099.109 Electron/28.1.0 Safari/537.36" etag="F87hVYEIUxxXvtKCzdUr" version="24.1.0" type="device">
  <diagram name="第 1 页" id="b6hPSz6thqLhmrrh2TzW">
    <mxGraphModel dx="1674" dy="771" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="zQWAWFj7kRZeQtf7w0f5-9" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="640" y="80" width="500" height="280" as="geometry" />
        </mxCell>
        <mxCell id="zQWAWFj7kRZeQtf7w0f5-6" value="Navie实现：MMult_cuda_2.cu" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=none;strokeWidth=1;fillColor=#1CA5B8;fontColor=#FFFFFF;whiteSpace=wrap;align=center;verticalAlign=middle;spacingLeft=0;fontStyle=1;fontSize=14;spacing=5;" parent="zQWAWFj7kRZeQtf7w0f5-9" vertex="1">
          <mxGeometry x="2.5" width="247.5" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-60" value="&lt;div style=&quot;background-color: rgb(40, 44, 52); color: rgb(187, 187, 187); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;template &amp;lt;&lt;span style=&quot;color:#d55fde;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color:#d19a66;&quot;&gt;BLOCK&lt;/span&gt;&amp;gt;&lt;br&gt;&lt;span style=&quot;color:#d55fde;&quot;&gt;__global__ void &lt;/span&gt;&lt;span style=&quot;color:#61afef;&quot;&gt;sgemm&lt;/span&gt;(&lt;span style=&quot;color:#d55fde;&quot;&gt;int &lt;/span&gt;m, &lt;span style=&quot;color:#d55fde;&quot;&gt;int &lt;/span&gt;n, &lt;span style=&quot;color:#d55fde;&quot;&gt;int &lt;/span&gt;k, &lt;span style=&quot;color:#d55fde;&quot;&gt;float &lt;/span&gt;*a, &lt;span style=&quot;color:#d55fde;&quot;&gt;int &lt;/span&gt;lda,&lt;/div&gt;&lt;div style=&quot;background-color: rgb(40, 44, 52); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;float &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;*b, &lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;int &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;ldb,&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;float &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;*c, &lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;int &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;ldc) {&lt;/font&gt;&lt;br&gt;  &lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;&amp;nbsp; int &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;_m = blockIdx.x * &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;BLOCK &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;+ threadIdx.x;&lt;/font&gt;&lt;br&gt;  &lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;&amp;nbsp; int &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;_n = blockIdx.y * &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;BLOCK &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;+ threadIdx.y;&lt;/font&gt;&lt;br&gt;  &lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;&amp;nbsp; if &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;(_m &amp;lt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;m &lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;and &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;_n &amp;lt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;n&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;) {&lt;/font&gt;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;&amp;nbsp; &amp;nbsp; float &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;sum = &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0.f&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;/font&gt;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;&amp;nbsp; &amp;nbsp; for &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;(&lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222);&quot;&gt;int &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;i = &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;; i &amp;lt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;k&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;; ++i) {&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; sum += &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;a&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;[_m * &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;k &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;+ i] * &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;b&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;[i * &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;n &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;+ _n];&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;&amp;nbsp; &amp;nbsp; }&lt;/font&gt;&lt;br&gt;    &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;&amp;nbsp; &amp;nbsp; c&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;[_m * &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;n &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;+ _n] = sum;&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;&amp;nbsp; }&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;}&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="zQWAWFj7kRZeQtf7w0f5-9" vertex="1">
          <mxGeometry y="20" width="500" height="220" as="geometry" />
        </mxCell>
        <mxCell id="zQWAWFj7kRZeQtf7w0f5-8" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;A[_m * k + i&amp;nbsp; &amp;nbsp;]：第_m行的第i列&lt;br style=&quot;&quot;&gt;B[&amp;nbsp; &amp;nbsp;i&amp;nbsp; * n + _n]：第i行的第_n列&lt;br style=&quot;&quot;&gt;C[_m * n + _n]：第_m行的第_n列&lt;br&gt;&lt;br style=&quot;&quot;&gt;C[_m * n + i] = A[_m * k + i] * B[i * n + _n]&lt;/font&gt;&lt;/font&gt;" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#BFE6EB;strokeWidth=1;fillColor=#D1EDF1;fontColor=#0E5560;whiteSpace=wrap;align=left;verticalAlign=middle;spacingLeft=10;" parent="zQWAWFj7kRZeQtf7w0f5-9" vertex="1">
          <mxGeometry x="210" y="180" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="zQWAWFj7kRZeQtf7w0f5-10" value="每个thread都在global memory（全局内存）上处理，花费473cycle向reg搬运。" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#F4C5CB;strokeWidth=1;fillColor=#F8D6DA;fontColor=#711623;whiteSpace=wrap;align=left;verticalAlign=middle;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="640" y="370" width="480" height="40" as="geometry" />
        </mxCell>
        <mxCell id="zQWAWFj7kRZeQtf7w0f5-11" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="39" y="49" width="520" height="510" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-34" value="&lt;font style=&quot;font-size: 26px;&quot;&gt;m&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry y="410" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-35" value="&lt;font style=&quot;font-size: 26px;&quot;&gt;k&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="180" y="290" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-36" value="" style="shape=crossbar;whiteSpace=wrap;html=1;rounded=1;direction=south;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="40" y="350" width="20" height="160" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-1" value="0" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="80" y="350" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-2" value="1" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="159.9987096774194" y="350" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-3" value="2" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="239.9974193548387" y="350" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-4" value="3" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="80" y="429.9970731707317" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-5" value="4" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="159.9987096774194" y="429.9970731707317" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-6" value="5" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="239.99741935483877" y="429.9970731707317" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-39" value="" style="shape=crossbar;whiteSpace=wrap;html=1;rounded=1;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="80" y="318" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-40" value="0" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="360" y="350" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-41" value="1" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="439.99870967741936" y="350" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-42" value="2" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="360" y="429.9970731707317" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-43" value="3" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="439.99870967741936" y="429.9970731707317" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-44" value="2" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="360" y="150" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-45" value="3" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="439.99870967741936" y="150" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-46" value="4" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="360" y="229.9970731707317" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-47" value="5" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="439.99870967741936" y="229.9970731707317" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-48" value="0" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="360" y="70" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-49" value="1" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="439.99870967741936" y="70" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-50" value="" style="shape=crossbar;whiteSpace=wrap;html=1;rounded=1;direction=south;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="320" y="70" width="20" height="240" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-51" value="" style="shape=crossbar;whiteSpace=wrap;html=1;rounded=1;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="360" y="28" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-52" value="&lt;font style=&quot;font-size: 26px;&quot;&gt;k&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="290" y="170" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-53" value="&lt;font style=&quot;font-size: 26px;&quot;&gt;n&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="420" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-54" value="&lt;span style=&quot;font-size: 26px;&quot;&gt;x&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="240" y="230" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-55" value="&lt;font style=&quot;font-size: 23px;&quot;&gt;C&lt;sub&gt;mxn&lt;/sub&gt; = A&lt;sub&gt;mxk&amp;nbsp;&lt;/sub&gt;* B&lt;sub&gt;kxn&lt;/sub&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="zQWAWFj7kRZeQtf7w0f5-11" vertex="1">
          <mxGeometry x="55" y="150" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-57" value="" style="endArrow=classic;html=1;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="449.12999999999994" as="sourcePoint" />
            <mxPoint x="300" y="449.57" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aou3tDYSQV4QTE3wkxV_-58" value="" style="endArrow=classic;html=1;rounded=0;" parent="zQWAWFj7kRZeQtf7w0f5-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="90" as="sourcePoint" />
            <mxPoint x="420" y="275.21" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xjz_qz69LZCz85LHi2jT-4" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="760" y="559" width="320" height="41" as="geometry" />
        </mxCell>
        <mxCell id="xjz_qz69LZCz85LHi2jT-1" value="16B" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" vertex="1" parent="xjz_qz69LZCz85LHi2jT-4">
          <mxGeometry width="80.0008602243035" height="41" as="geometry" />
        </mxCell>
        <mxCell id="xjz_qz69LZCz85LHi2jT-2" value="8B" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" vertex="1" parent="xjz_qz69LZCz85LHi2jT-4">
          <mxGeometry x="80" width="40" height="41" as="geometry" />
        </mxCell>
        <mxCell id="xjz_qz69LZCz85LHi2jT-3" value="100B" style="html=1;shadow=0;fontSize=26;align=center;fontStyle=0;whiteSpace=wrap;rounded=0;" vertex="1" parent="xjz_qz69LZCz85LHi2jT-4">
          <mxGeometry x="120" width="200" height="41" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
